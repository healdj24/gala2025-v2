<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Gala 2025</title>
  <style>
    @font-face {
      font-family: 'Nagbuloe';
      src: url('./fonts/Nagbuloe-Regular.otf') format('opentype');
      font-weight: normal;
      font-style: normal;
    }

    @font-face {
      font-family: 'Nagbuloe';
      src: url('./fonts/Nagbuloe-Bold.otf') format('opentype');
      font-weight: bold;
      font-style: normal;
    }

    @font-face {
      font-family: 'Nagbuloe Outline';
      src: url('./fonts/Nagbuloe-Outline.otf') format('opentype');
      font-weight: normal;
      font-style: normal;
    }

    @font-face {
      font-family: 'Nagbuloe Thin';
      src: url('./fonts/Nagbuloe-Thin.otf') format('opentype');
      font-weight: 100;
      font-style: normal;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      min-height: 200vh;
      background: #ffffff;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }

    .hero {
      text-align: center;
      padding: 2rem;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .small-text {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', sans-serif;
      font-size: 0.75rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: #666;
      margin-bottom: 1rem;
      font-weight: 400;
    }

    .main-title {
      font-family: 'Nagbuloe', serif;
      font-size: clamp(4rem, 15vw, 12rem);
      font-weight: normal;
      color: #000;
      margin: 0;
      line-height: 0.9;
      letter-spacing: -0.02em;
      font-variant-ligatures: none;
      font-kerning: none;
    }

    .main-title span {
      font-family: 'Nagbuloe', serif;
      font-weight: bold;
    }

    .main-title span.outline {
      font-family: 'Nagbuloe Outline', serif;
      font-weight: normal;
    }

    /* Play button styling */
    .play-button {
      position: fixed;
      top: 2rem;
      right: 2rem;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background-color: #000;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.2s ease, opacity 0.3s ease;
      z-index: 1000;
    }

    .play-button:hover {
      transform: scale(1.1);
    }

    .play-button:active {
      transform: scale(0.95);
    }

    /* Play triangle */
    .play-button .play-icon {
      width: 0;
      height: 0;
      border-left: 18px solid #ffffff;
      border-top: 12px solid transparent;
      border-bottom: 12px solid transparent;
      margin-left: 4px;
    }

    /* Pause icon */
    .play-button .pause-icon {
      display: none;
      width: 20px;
      height: 24px;
      position: relative;
    }

    .play-button .pause-icon::before,
    .play-button .pause-icon::after {
      content: '';
      position: absolute;
      width: 6px;
      height: 24px;
      background-color: #ffffff;
    }

    .play-button .pause-icon::before {
      left: 0;
    }

    .play-button .pause-icon::after {
      right: 0;
    }

    .play-button.playing .play-icon {
      display: none;
    }

    .play-button.playing .pause-icon {
      display: block;
    }
  </style>
</head>
<body>
  <!-- Play button -->
  <button class="play-button" id="playButton">
    <div class="play-icon"></div>
    <div class="pause-icon"></div>
  </button>

  <!-- Hidden YouTube player -->
  <div id="player" style="display: none;"></div>

  <div class="hero">
    <div class="small-text">The fourth annual edition of</div>
    <h1 class="main-title" id="mainTitle">
      <span>t</span><span>h</span><span>e</span><span> </span><span>g</span><span>a</span><span>l</span><span>a</span>
    </h1>
  </div>

  <!-- Load YouTube IFrame API -->
  <script src="https://www.youtube.com/iframe_api"></script>

  <script>
    // YouTube Player for "Bad Decisions" by The Strokes
    let player;
    let isPlaying = false;

    function onYouTubeIframeAPIReady() {
      player = new YT.Player('player', {
        height: '0',
        width: '0',
        videoId: '5fbZTnZDvPA', // "Bad Decisions" by The Strokes (Official Audio)
        playerVars: {
          autoplay: 0,
          controls: 0,
          disablekb: 1,
          fs: 0,
          modestbranding: 1,
          playsinline: 1,
          enablejsapi: 1
        },
        events: {
          'onReady': onPlayerReady,
          'onStateChange': onPlayerStateChange,
          'onError': onPlayerError
        }
      });
    }

    function onPlayerError(event) {
      console.error('YouTube Player Error:', event.data);
      alert('Unable to play this song. Error code: ' + event.data);
    }

    function onPlayerReady(event) {
      // Player is ready
      document.getElementById('playButton').addEventListener('click', togglePlay);
    }

    function onPlayerStateChange(event) {
      // Update button state when video ends
      if (event.data === YT.PlayerState.ENDED) {
        isPlaying = false;
        document.getElementById('playButton').classList.remove('playing');
      }
    }

    function togglePlay() {
      if (!player || !player.playVideo) {
        console.error('Player not ready yet');
        return;
      }

      if (isPlaying) {
        player.pauseVideo();
        isPlaying = false;
        document.getElementById('playButton').classList.remove('playing');
        stopMusicSync(); // Stop text flicker when music pauses
      } else {
        player.playVideo();
        player.unMute(); // Ensure it's not muted
        player.setVolume(100); // Set volume to 100%
        isPlaying = true;
        document.getElementById('playButton').classList.add('playing');
        startMusicSync(); // Start text flicker synced to beat
        console.log('Playing video...');
      }
    }

    // Text flicker animation
    const title = document.getElementById('mainTitle');
    const letters = title.querySelectorAll('span');
    let isBold = true;
    let flickerInterval = null;
    let initialAnimationDone = false;
    
    // Initial burst animation on page load
    const burstPattern = [
      50, 50, 50, 150,
      50, 50, 50, 150,
      50, 50, 50, 150,
      50, 50, 50, 150,
      80, 80, 80, 250,
      80, 80, 80, 250,
      80, 80, 250,
      120, 120, 300,
      150, 150, 300,
      200, 300
    ];
    
    let currentIndex = 0;
    
    function flip() {
      isBold = !isBold;
      
      if (isBold) {
        letters.forEach(letter => letter.classList.remove('outline'));
      } else {
        letters.forEach(letter => letter.classList.add('outline'));
      }
    }
    
    function scheduleNextFlip() {
      if (currentIndex >= burstPattern.length) {
        letters.forEach(letter => letter.classList.remove('outline'));
        initialAnimationDone = true;
        isBold = true;
        return;
      }
      
      const delay = burstPattern[currentIndex];
      currentIndex++;
      
      setTimeout(function() {
        flip();
        scheduleNextFlip();
      }, delay);
    }
    
    // Start initial animation on page load
    scheduleNextFlip();
    
    // Music-synced flicker (triggered when music plays)
    function startMusicSync() {
      if (flickerInterval) return; // Already running
      
      // "Bad Decisions" is ~110 BPM = 545ms per beat
      // Flicker on every beat
      flickerInterval = setInterval(function() {
        flip();
      }, 545);
    }
    
    function stopMusicSync() {
      if (flickerInterval) {
        clearInterval(flickerInterval);
        flickerInterval = null;
        // Reset to bold
        isBold = true;
        letters.forEach(letter => letter.classList.remove('outline'));
      }
    }
  </script>
</body>
</html>

